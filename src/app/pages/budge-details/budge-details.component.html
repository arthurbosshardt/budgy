<header id="header">
  <a class="logo" routerLink="/">Budgy</a>
  <ul>
    <li><a routerLink="/">Accueil</a></li>
    <li><a routerLink="/user" class="active">Inscription</a></li>
  </ul>
</header>
<div class="title-details">
  <a (click)="saveBudgeInfos()" routerLink="/user" id="return"><</a>
  <mat-icon>{{ this.icon }}</mat-icon> 
  <h1>
    {{ this.type }}
  </h1>
  <mat-icon>{{ this.icon }}</mat-icon>
</div>
<div class="change-budge-form">
  <mat-horizontal-stepper #stepper>
    <mat-step label="Budge actuel">
      <form>
        <ng-template matStepLabel
          >Mon <strong>budge</strong> actuel</ng-template
        >
        <mat-form-field>
          <mat-label>Nom de la compagnie</mat-label>
          <input matInput type="text" [(value)]="this.budgeInfos.company_name" readonly />
        </mat-form-field>
        <br />
        <mat-form-field>
          <mat-label>Jour de prélèvement</mat-label>
          <input matInput type="number" min="1" max="31" [(value)]="this.budgeInfos.sampling_day" readonly />
        </mat-form-field>
        <br />
        <mat-form-field>
          <mat-label>Prix mensuel</mat-label>
          <input matInput type="number" [(value)]="this.budgeInfos.price" readonly />
        </mat-form-field>
        <div>
          <button mat-raised-button matStepperNext>Modifier</button>
        </div>
      </form>
    </mat-step>
    <mat-step label="Nouveau budge">
      <form>
        <ng-template matStepLabel
          >Mon nouveau <strong>budge</strong></ng-template
        >
        <mat-form-field>
          <mat-label>Nom de la compagnie</mat-label>
          <mat-select name="company_name" [(ngModel)]="this.budgeInfos.company_name" [(value)]="this.budgeInfos.company_name">
            <mat-option
              *ngFor="let company of companies"
              [value]="company.company_name"
              >{{ company.company_name }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <br />
        <mat-form-field>
          <mat-label>Jour de prélèvement</mat-label>
          <input matInput type="number" min="1" max="31" name="sampling_day" [(ngModel)]="this.budgeInfos.sampling_day" />
        </mat-form-field>
        <br />
        <mat-form-field>
          <mat-label>Prix mensuel</mat-label>
          <input matInput type="number" name="price" [(ngModel)]="this.budgeInfos.price" />
        </mat-form-field>
        <div>
          <button mat-raised-button matStepperPrevious (click)="saveBudgeInfos()">Confirmer</button>
        </div>
      </form>
    </mat-step>
  </mat-horizontal-stepper>
</div>

<div class="cards">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Ajouter une <strong>tâche</strong></mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <app-todo-form (toDoChange)="onAddToDoChange($event)"></app-todo-form>
      <div fxLayout="row" fxLayoutAlign="end">
        <button mat-raised-button (click)="addToDo()">Ajouter</button>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card>
    <mat-card-header>
      <mat-card-title><strong>tâches</strong> à faire</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <ng-container *ngIf="incompleteToDos | async; let toDos">
        <ng-container *ngIf="toDos.length > 0; else allDone">
          <app-todo-list
            [toDos]="toDos"
            (toDoChange)="onCompleteToDo($event)"
          ></app-todo-list>
        </ng-container>
        <ng-template #allDone>
          <div>
            <h4>Rien à faire</h4>
          </div>
        </ng-template>
      </ng-container>
    </mat-card-content>
  </mat-card>

  <mat-card>
    <mat-card-header>
      <mat-card-title><strong>tâches</strong> effectuées</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <app-todo-list
        [toDos]="completeToDos | async"
        (toDoChange)="onIncompleteToDo($event)"
      ></app-todo-list>
    </mat-card-content>
  </mat-card>
</div>
